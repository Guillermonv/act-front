{"ast":null,"code":"var _jsxFileName = \"/Users/guillermovarelli/Documents/workspace/act-front/src/form/StatusModal.js\";\nimport React from \"react\";\nimport Modal from \"@mui/material/Modal\";\nimport Box from \"@mui/material/Box\";\nimport Typography from \"@mui/material/Typography\";\nimport Slider from \"@mui/material/Slider\";\nimport Button from \"@mui/material/Button\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UPDATE_API_URL = \"http://localhost:8080/activities/update\";\nconst statusLevels = [{\n  value: 0.15,\n  label: \"suck\",\n  color: \"#000000\"\n}, {\n  value: 0.35,\n  label: \"failed\",\n  color: \"#FF0000\"\n}, {\n  value: 0.55,\n  label: \"regular\",\n  color: \"#FFFF00\"\n}, {\n  value: 0.75,\n  label: \"accomplished\",\n  color: \"#00A100\"\n}, {\n  value: 0.95,\n  label: \"excellence\",\n  color: \"#0000FF\"\n}];\nconst getClosestStatus = value => {\n  return statusLevels.reduce((prev, curr) => Math.abs(curr.value - value) < Math.abs(prev.value - value) ? curr : prev);\n};\nconst formatDate = isoDate => {\n  const [year, month, day] = isoDate.split(\"-\");\n  return `${day}-${month}-${year}`;\n};\nconst StatusModal = ({\n  selectedCell,\n  setSelectedCell,\n  refreshData\n}) => {\n  var _statusLevels$find;\n  if (!selectedCell) return null;\n  const currentValue = ((_statusLevels$find = statusLevels.find(s => s.label === selectedCell.status)) === null || _statusLevels$find === void 0 ? void 0 : _statusLevels$find.value) || 0.55;\n  const handleStatusChange = (_, newValue) => {\n    const closestStatus = getClosestStatus(newValue);\n    setSelectedCell(prev => ({\n      ...prev,\n      status: closestStatus.label\n    }));\n  };\n  const handleSave = () => {\n    const closestStatus = getClosestStatus(currentValue);\n    const formattedDate = formatDate(selectedCell.x);\n    fetch(UPDATE_API_URL, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        date: formattedDate,\n        activity: selectedCell.activity,\n        status: closestStatus.label\n      })\n    }).then(() => {\n      console.log(\"Updated successfully\");\n      refreshData(); // ðŸ” volver a cargar los datos del heatmap\n    }).catch(err => console.error(\"Error updating:\", err));\n    setSelectedCell(null);\n  };\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    open: !!selectedCell,\n    onClose: () => setSelectedCell(null),\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 4,\n        bgcolor: \"#FFFFFF\",\n        borderRadius: 2,\n        boxShadow: 50,\n        maxWidth: 500,\n        margin: \"auto\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        fontFamily: \"Arial, sans-serif\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          alignItems: \"center\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            sx: {\n              fontSize: \"1.2rem\",\n              fontWeight: \"bold\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Date:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 15\n            }, this), \" \", formatDate(selectedCell.x)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            sx: {\n              fontSize: \"1.2rem\",\n              fontWeight: \"bold\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Activity:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 15\n            }, this), \" \", selectedCell.activity]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"success\",\n          onClick: handleSave,\n          sx: {\n            fontSize: \"1.1rem\",\n            fontWeight: \"bold\",\n            py: 1.2,\n            px: 3,\n            height: \"fit-content\"\n          },\n          children: \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Slider, {\n        value: currentValue,\n        step: 0.01,\n        marks: statusLevels.map(({\n          value,\n          label,\n          color\n        }) => ({\n          value,\n          label: /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color,\n              fontSize: \"1rem\",\n              fontWeight: \"bold\"\n            },\n            children: label\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 15\n          }, this)\n        })),\n        min: 0.15,\n        max: 0.95,\n        onChange: handleStatusChange,\n        sx: {\n          color: getClosestStatus(currentValue).color,\n          '& .MuiSlider-markLabel': {\n            fontSize: \"1rem\",\n            fontWeight: \"bold\",\n            textAlign: \"center\",\n            whiteSpace: \"nowrap\",\n            transform: \"translateX(-50%)\"\n          },\n          my: 2\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n};\n_c = StatusModal;\nexport default StatusModal;\nvar _c;\n$RefreshReg$(_c, \"StatusModal\");","map":{"version":3,"names":["React","Modal","Box","Typography","Slider","Button","jsxDEV","_jsxDEV","UPDATE_API_URL","statusLevels","value","label","color","getClosestStatus","reduce","prev","curr","Math","abs","formatDate","isoDate","year","month","day","split","StatusModal","selectedCell","setSelectedCell","refreshData","_statusLevels$find","currentValue","find","s","status","handleStatusChange","_","newValue","closestStatus","handleSave","formattedDate","x","fetch","method","headers","body","JSON","stringify","date","activity","then","console","log","catch","err","error","open","onClose","children","sx","p","bgcolor","borderRadius","boxShadow","maxWidth","margin","display","flexDirection","fontFamily","justifyContent","alignItems","variant","fontSize","fontWeight","fileName","_jsxFileName","lineNumber","columnNumber","onClick","py","px","height","step","marks","map","style","min","max","onChange","textAlign","whiteSpace","transform","my","_c","$RefreshReg$"],"sources":["/Users/guillermovarelli/Documents/workspace/act-front/src/form/StatusModal.js"],"sourcesContent":["import React from \"react\";\nimport Modal from \"@mui/material/Modal\";\nimport Box from \"@mui/material/Box\";\nimport Typography from \"@mui/material/Typography\";\nimport Slider from \"@mui/material/Slider\";\nimport Button from \"@mui/material/Button\";\n\nconst UPDATE_API_URL = \"http://localhost:8080/activities/update\";\n\nconst statusLevels = [\n  { value: 0.15, label: \"suck\", color: \"#000000\" },\n  { value: 0.35, label: \"failed\", color: \"#FF0000\" },\n  { value: 0.55, label: \"regular\", color: \"#FFFF00\" },\n  { value: 0.75, label: \"accomplished\", color: \"#00A100\" },\n  { value: 0.95, label: \"excellence\", color: \"#0000FF\" },\n];\n\nconst getClosestStatus = (value) => {\n  return statusLevels.reduce((prev, curr) =>\n    Math.abs(curr.value - value) < Math.abs(prev.value - value) ? curr : prev\n  );\n};\n\nconst formatDate = (isoDate) => {\n  const [year, month, day] = isoDate.split(\"-\");\n  return `${day}-${month}-${year}`;\n};\n\nconst StatusModal = ({ selectedCell, setSelectedCell, refreshData }) => {\n  if (!selectedCell) return null;\n\n  const currentValue = statusLevels.find((s) => s.label === selectedCell.status)?.value || 0.55;\n\n  const handleStatusChange = (_, newValue) => {\n    const closestStatus = getClosestStatus(newValue);\n    setSelectedCell((prev) => ({ ...prev, status: closestStatus.label }));\n  };\n\n  const handleSave = () => {\n    const closestStatus = getClosestStatus(currentValue);\n    const formattedDate = formatDate(selectedCell.x);\n\n    fetch(UPDATE_API_URL, {\n      method: \"PUT\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        date: formattedDate,\n        activity: selectedCell.activity,\n        status: closestStatus.label,\n      }),\n    })\n      .then(() => {\n        console.log(\"Updated successfully\");\n        refreshData(); // ðŸ” volver a cargar los datos del heatmap\n      })\n      .catch((err) => console.error(\"Error updating:\", err));\n\n    setSelectedCell(null);\n  };\n\n  return (\n    <Modal open={!!selectedCell} onClose={() => setSelectedCell(null)}>\n      <Box\n        sx={{\n          p: 4,\n          bgcolor: \"#FFFFFF\",\n          borderRadius: 2,\n          boxShadow: 50,\n          maxWidth: 500,\n          margin: \"auto\",\n          display: \"flex\",\n          flexDirection: \"column\",\n          fontFamily: \"Arial, sans-serif\",\n        }}\n      >\n        <Box sx={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n          <Box>\n            <Typography variant=\"body1\" sx={{ fontSize: \"1.2rem\", fontWeight: \"bold\" }}>\n              <strong>Date:</strong> {formatDate(selectedCell.x)}\n            </Typography>\n            <Typography variant=\"body1\" sx={{ fontSize: \"1.2rem\", fontWeight: \"bold\" }}>\n              <strong>Activity:</strong> {selectedCell.activity}\n            </Typography>\n          </Box>\n\n          <Button\n            variant=\"contained\"\n            color=\"success\"\n            onClick={handleSave}\n            sx={{\n              fontSize: \"1.1rem\",\n              fontWeight: \"bold\",\n              py: 1.2,\n              px: 3,\n              height: \"fit-content\",\n            }}\n          >\n            Save\n          </Button>\n        </Box>\n\n        <Slider\n          value={currentValue}\n          step={0.01}\n          marks={statusLevels.map(({ value, label, color }) => ({\n            value,\n            label: (\n              <span style={{ color, fontSize: \"1rem\", fontWeight: \"bold\" }}>\n                {label}\n              </span>\n            ),\n          }))}\n          min={0.15}\n          max={0.95}\n          onChange={handleStatusChange}\n          sx={{\n            color: getClosestStatus(currentValue).color,\n            '& .MuiSlider-markLabel': {\n              fontSize: \"1rem\",\n              fontWeight: \"bold\",\n              textAlign: \"center\",\n              whiteSpace: \"nowrap\",\n              transform: \"translateX(-50%)\",\n            },\n            my: 2,\n          }}\n        />\n      </Box>\n    </Modal>\n  );\n};\n\nexport default StatusModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}